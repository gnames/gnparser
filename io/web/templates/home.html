{{ define "home" }}
<section class="parser">
  <div class="grid">
    <div class="unit whole">
      <form action="/" method="post">
        <div class="form-elements">
          <label for="format">Output format</label>
          <select id="format" name="format">
            <option value="html">HTML</option>
            <option value="json">JSON</option>
            <option value="csv">CSV</option>
            <option value="tsv">TSV</option>
          </select>
          <label for="with_details" title="Include more parsing details">Show details</label>
          <input
            type="checkbox"
            id="with_details"
            name="with_details"
            title="Include more parsing details"
            {{ if or .WithDetails (not .Parsed) }}checked="checked"{{ end }}
          />
          <label for="code">Nomenclatural Code</label>
          <select id="code" name="code">
            <option value="">Any</option>
            <option value="bacterial" {{ if eq .Code "bacterial" }}selected="selected"{{ end }}>Bacterial</option>
            <option value="botanical" {{ if eq .Code "botanical" }}selected="selected"{{ end }}>Botanical</option>
            <option value="cultivar" {{ if eq .Code "cultivar" }}selected="selected"{{ end }}>Cultivar</option>
            <option value="viral" {{ if eq .Code "viral" }}selected="selected"{{ end }}>Viral</option>
            <option value="zoological" {{ if eq .Code "zoological" }}selected="selected"{{ end }}>Zoological</option>
          </select>
        </div>

        <div class="form-elements">
          <label for="diaereses" title="Keep diaeresis marks (e.g., ë, ï) in canonical form">Preserve diaereses</label>
          <input type="checkbox" id="diaereses" name="diaereses" title="Keep diaeresis marks (e.g., ë, ï) in canonical form" {{ if .PreserveDiaereses }}checked="checked"{{ end }} />
          <label for="compact_authors" title="Remove spaces between author initials (e.g., 'L. R. Smith' becomes 'L.R.Smith')">Compact authors' initials</label>
          <input type="checkbox" id="compact_authors" name="compact_authors" title="Remove spaces between author initials (e.g., 'L. R. Smith' becomes 'L.R.Smith')" {{ if .CompactAuthors }}checked="checked"{{ end }} />
          <label for="flatten" title="Flatten nested JSON structure into a single level">Flatten output</label>
          <input type="checkbox" id="flatten" name="flatten" title="Flatten nested JSON structure into a single level" {{ if .FlattenOutput }}checked="checked"{{ end }} />
        </div>

        <textarea
          autofocus
          id="names"
          name="names"
          placeholder="Add up to 5000 names, one per line"
        >
{{.Input}}</textarea
        >
        <input type="submit" value="Parse" />
      </form>
    </div>
  </div>
</section>
{{ if .Parsed }} {{if eq .Format "html" }}
<section class="parser results">
  <div class="grid">
    <div class="unit whole">
      <h4>Results:</h4>
      {{ range .Parsed }}
      <p>
        <code class="unit whole" style="margin-bottom: 1em"
          >{{ parsedJSON . $.FlattenOutput }}</code
        >
      </p>
      <p></p>
      {{ end }}
    </div>
  </div>
</section>
{{ end }} {{ end }} {{ end }}
